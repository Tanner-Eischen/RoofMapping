# Story 6.2: AWS Infrastructure Setup

## Status
Draft

## Story
**As a** DevOps engineer
**I want** to provision AWS resources for ML processing
**So that** the Lambda pipeline can run

## Acceptance Criteria
- [ ] AWS account and IAM user configured
- [ ] SQS queue created
- [ ] Lambda function deployed
- [ ] ECR repository for Docker images
- [ ] S3 bucket for image storage
- [ ] CloudWatch logs configured
- [ ] IAM policies configured (least privilege)
- [ ] Dead letter queue configured

## Tasks / Subtasks
- [ ] Configure AWS account/IAM (AC: 1)
- [ ] Create SQS + DLQ (AC: 2, 8)
- [ ] Deploy Lambda and set ECR (AC: 3-4)
- [ ] Create S3 and CloudWatch logs (AC: 5-6)
- [ ] IAM policies least privilege (AC: 7)

## Dev Notes
- Infrastructure overview: [../architecture/deployment-strategy.md#infrastructure](../architecture/deployment-strategy.md#infrastructure)
- System data flow and components: [../architecture/system-architecture.md#repository-structure](../architecture/system-architecture.md#repository-structure)
- Environment configuration: [../architecture/deployment-strategy.md#environment-configuration](../architecture/deployment-strategy.md#environment-configuration)
- PRD traceability: [../prd/12-epic-and-story-structure.md#story-62-aws-infrastructure-setup](../prd/12-epic-and-story-structure.md#story-62-aws-infrastructure-setup)

## Dependencies
- AWS account access and billing
- Epic 4 Lambda container and code

## Estimate
M (medium)

## Priority
P0

## Assumptions
- Least privilege IAM policies are defined and enforceable.
- Regional selections align with data residency and latency goals.
- CloudWatch retention policies set appropriately.

## Edge Cases
- Permission errors on ECR or Lambda actions; validate policies.
- SQS DLQ misconfiguration; test retry and dead-letter behavior.
- S3 object lifecycle and security settings; ensure compliance.

### Testing
- Provisioning: resources exist and are accessible.
- Permissions: actions allowed as intended; least privilege verified.
- Logging: CloudWatch receives logs from services.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-13 | v1 | Initial draft created | Scrum Master |

## Dev Agent Record
- Agent Model Used: 
- Debug Log References: 
- Completion Notes List: 
- File List: 

## QA Results
- Pending