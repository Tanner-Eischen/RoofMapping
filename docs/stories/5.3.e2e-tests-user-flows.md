# Story 5.3: E2E Tests for User Flows

## Status
Draft

## Story
**As a** QA engineer
**I want** end-to-end tests for critical user flows
**So that** the complete user experience is validated

## Acceptance Criteria
- [ ] Playwright configured
- [ ] Test: Success path (address → results)
- [ ] Test: Mobile assist path (photos → enhanced results)
- [ ] Test: PDF export
- [ ] Test: Share functionality
- [ ] Test: Error handling (invalid address, timeout)
- [ ] Test: Invalid address submission shows error "Please enter a valid address"
- [ ] Test: Network failure during polling shows retry button
- [ ] Test: Mobile assist triggered when confidence <70%
- [ ] Test: PDF download works with special characters in address
- [ ] Tests run in CI on preview deployments

## Tasks / Subtasks
- [ ] Configure Playwright (AC: 1)
- [ ] Implement success and assist paths (AC: 2-3)
- [ ] Add PDF export and share tests (AC: 4-5)
- [ ] Add error condition tests (AC: 6-9)
- [ ] Run in CI on previews (AC: 10)

## Dev Notes
- Routing and flows: [../architecture/frontend-architecture.md#routing](../architecture/frontend-architecture.md#routing)
- API service layer: [../architecture/frontend-architecture.md#api-service-layer](../architecture/frontend-architecture.md#api-service-layer)
- Testing strategy: [../architecture/development-workflow.md#testing-strategy](../architecture/development-workflow.md#testing-strategy)
- PRD traceability: [../prd/12-epic-and-story-structure.md#story-53-e2e-tests-for-user-flows](../prd/12-epic-and-story-structure.md#story-53-e2e-tests-for-user-flows)

## Dependencies
- Frontend screens implemented (Epic 2)
- Backend endpoints stable (Epic 3)
- PDF export functional (Story 2.5)

## Estimate
M (medium)

## Priority
P0

## Assumptions
- Playwright tests run against preview deployments with seeded data.
- Network conditions can be simulated for retry flows.
- Confidence threshold logic exposed for assist path.

## Edge Cases
- Special characters in addresses affecting file names and routing.
- Slow polling intervals; ensure retry button visibility.
- Mobile viewport differences impacting flows.

### Testing
- E2E: success path, assist path, PDF export, share.
- Errors: invalid address message, network failure retry.
- CI: run on preview; collect videos and traces.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-13 | v1 | Initial draft created | Scrum Master |

## Dev Agent Record
- Agent Model Used: 
- Debug Log References: 
- Completion Notes List: 
- File List: 

## QA Results
- Pending