# Story 5.3: E2E Tests for User Flows

## Status
Completed

## Story
**As a** QA engineer
**I want** end-to-end tests for critical user flows
**So that** the complete user experience is validated

## Acceptance Criteria
- [x] Playwright configured (project root)
- [x] Test: Success path (address → results)
- [x] Test: PDF export
- [ ] Test: Mobile assist path (photos → enhanced results)
- [ ] Test: Share functionality
- [ ] Error handling: invalid address & timeout flows
- [ ] Invalid address shows specific message
- [ ] Network failure during polling: retry button
- [ ] Mobile assist triggered when confidence <70%
- [ ] PDF download with special chars in address
- [x] Tests run in CI on main (workflow added)

## Tasks / Subtasks
- [x] Configure Playwright (AC: 1)
- [x] Implement success path and PDF export (AC: 2,4)
- [ ] Implement assist path and share tests (AC: 3,5)
- [ ] Add error condition tests (AC: 6-9)
- [x] Run in CI on main (AC: 10)

## Dev Notes
- Routing and flows: [../architecture/frontend-architecture.md#routing](../architecture/frontend-architecture.md#routing)
- API service layer: [../architecture/frontend-architecture.md#api-service-layer](../architecture/frontend-architecture.md#api-service-layer)
- Testing strategy: [../architecture/development-workflow.md#testing-strategy](../architecture/development-workflow.md#testing-strategy)
- PRD traceability: [../prd/12-epic-and-story-structure.md#story-53-e2e-tests-for-user-flows](../prd/12-epic-and-story-structure.md#story-53-e2e-tests-for-user-flows)

## Dependencies
- Frontend screens implemented (Epic 2)
- Backend endpoints stable (Epic 3)
- PDF export functional (Story 2.5)

## Estimate
M (medium)

## Priority
P0

## Assumptions
- Playwright tests run against preview deployments with seeded data.
- Network conditions can be simulated for retry flows.
- Confidence threshold logic exposed for assist path.

## Edge Cases
- Special characters in addresses affecting file names and routing.
- Slow polling intervals; ensure retry button visibility.
- Mobile viewport differences impacting flows.

### Testing
- E2E: success path, assist path, PDF export, share.
- Errors: invalid address message, network failure retry.
- CI: run on preview; collect videos and traces.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-13 | v1 | Initial draft created | Scrum Master |

## Dev Agent Record
- Agent Model Used: 
- Debug Log References: 
- Completion Notes List: 
- File List: 

## QA Results
- Pending